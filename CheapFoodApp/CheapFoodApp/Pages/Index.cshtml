@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

@if (Model.ErrorMessage is not null)
{
    <div> BIG FAT ERROR @Model.ErrorMessage</div>
}

@{
    var activeTab = Request.Query["tab"].ToString() ?? "1";
    var activeFood = Request.Query["food"].ToString();
}

<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link @(activeTab == "1" ? "active" : "")" href="?tab=1">Shop</a>
    </li>
    <li class="nav-item">
        <a class="nav-link @(activeTab == "2" ? "active" : "")" href="?tab=2">Foods</a>
    </li>
    <li class="nav-item">
        <a class="nav-link @(activeTab == "3" ? "active" : "")" href="?tab=3">Supermarkets</a>
    </li>
</ul>

<div class="tab-content mt-3">
    @if (activeFood != "")
    {
        <p>Edit food @activeFood</p>

        <select id="fruits" name="fruits">
            <option value="apple">Apple</option>
            <option value="banana">Banana</option>
            <option value="orange">Orange</option>
            <option value="mango">Mango</option>
        </select>

    }
    @if (activeTab == "1" || activeTab == "")
    {
        <div>
            <p>Content for Tab 1</p>
            <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
                <ul>
                    @foreach (var item in Model.FoodItems)
                    {
                        <li><a href="?food=@item.Id">@item.Name</a></li>
                    }
                </ul>
            </div>
        </div>
    }
    else if (activeTab == "2")
    {
        <div>
            <p>Content for Tab 2</p>

            <form method="post">
                <input type="text" name="InputText" />
                <button type="submit" name="edit_command" value="new_food">Submit</button>
            </form>

        </div>
    }
    else if (activeTab == "3")
    {
        <div>
            <p>Supermarkets</p>

            <form method="post">
                <input type="text" name="InputText" />
                <button type="submit" name="edit_command" value="new_supermarket">Submit</button>
            </form>

        </div>
    }
</div>



<hr>
<hr>
<hr>



<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane"
                type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Home</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane"
                type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Foods</button>
    </li>
</ul>

<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active p-3 border border-top-0" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab">
        <p>This is the Home tab content.</p>
    </div>

    <div class="tab-pane fade p-3 border border-top-0" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab">
        <p>
            <form method="post">
                <button type="submit">Submit</button>
            </form>


            @if (Model.CreateNewFood)
{
    <div>
                    <p>The value is: @Model.CreateNewFood</p>

                        <form method="post">
        <input type="text" name="InputText" />
        <button type="submit">Submit</button>
    </form>

    @if (!string.IsNullOrEmpty(Model.Result))
    {
            <p>You submitted: <strong>@Model.Result</strong></p>
    }
    </div>
}


        </p>
    </div>
</div>


<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>

    <form method="post">
    <label for="fruit">Choose a fruit:</label>
    <select asp-for="SelectedFruit" asp-items="Model.FruitOptions" id="fruit" class="form-control"></select>
    <button type="submit">Submit</button>
</form>

</div>
